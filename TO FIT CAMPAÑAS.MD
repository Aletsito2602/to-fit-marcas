# ğŸš€ TO FIT CAMPAÃ‘AS - ANÃLISIS Y ESTRUCTURA DE DATOS

## ğŸ“‹ ANÃLISIS DE LA SECCIÃ“N EXISTENTE

### **ğŸ¯ FUNCIONALIDADES IDENTIFICADAS**

#### **1. CampaignsScreen.tsx - Vista Principal**
- **Grid de campaÃ±as** disponibles para participar
- **Sistema de bÃºsqueda** por texto
- **Modal de detalles** con informaciÃ³n completa
- **Cards con informaciÃ³n bÃ¡sica**: Marca, ComisiÃ³n, Imagen

#### **2. AddCampaignScreen.tsx - Crear CampaÃ±as**
- **Formulario completo** para crear nuevas campaÃ±as
- **Campos identificados**:
  - Nombre de la campaÃ±a
  - Cantidad de afiliados deseados
  - DÃ­as de duraciÃ³n
  - CampaÃ±a abierta (pÃºblico/privado)
  - Nombre de ubicaciÃ³n
  - ComisiÃ³n para afiliados
  - Objetivos de la campaÃ±a

#### **3. SelectProductsScreen.tsx - SelecciÃ³n de Productos**
- **Lista de productos** con checkbox
- **InformaciÃ³n por producto**: Nombre, Cantidad, CategorÃ­a, Tag Color
- **Sistema de bÃºsqueda** por productos
- **SelecciÃ³n mÃºltiple** con estado visual

#### **4. CampaignDetailModal.tsx - Detalles Completos**
- **Sistema de tabs**: CampaÃ±a (Productos) y Detalles
- **Grid de productos** asociados a la campaÃ±a
- **InformaciÃ³n detallada** de cada producto
- **Precios y disponibilidad**

#### **5. CampaignsDetailScreen.tsx - MÃ©tricas**
- **Filtros temporales**: Semana, Mes, AÃ±o
- **MÃ©tricas por campaÃ±a**: Revenue, Interactions
- **Estados de campaÃ±a**: Active, Inactive, Pending
- **InformaciÃ³n de marca** asociada

## ğŸ—„ï¸ ESTRUCTURA DE COLECCIONES FIREBASE PROPUESTA

### **ğŸ“Š ColecciÃ³n: `campaÃ±as`**
```javascript
{
  // IdentificaciÃ³n
  id: "camp_001",
  id_marca: "tucci123", // RelaciÃ³n con marcas
  id_creador: "user123", // Usuario que creÃ³ la campaÃ±a
  
  // InformaciÃ³n bÃ¡sica
  nombre: "CampaÃ±a Verano 2025",
  descripcion: "PromociÃ³n de verano con productos seleccionados",
  objetivos: "Aumentar ventas de productos de verano en un 25%",
  
  // ConfiguraciÃ³n
  cantidad_afiliados: 50,
  cantidad_afiliados_actuales: 12,
  dias_duracion: 30,
  campaÃ±a_abierta: true, // true = pÃºblica, false = privada
  ubicacion: "Argentina", // GeografÃ­a objetivo
  
  // Comisiones
  comision_tipo: "porcentaje", // "fijo" | "porcentaje" | "mixto"
  comision_valor: 15, // 15% o $15
  comision_fija: null, // Para comisiÃ³n mixta
  comision_display: "15%", // String para mostrar
  
  // Media
  imagen_principal: "https://...",
  galeria_imagenes: [
    "https://imagen1.jpg",
    "https://imagen2.jpg"
  ],
  
  // Estados y fechas
  estado: "activa", // "borrador" | "activa" | "pausada" | "finalizada" | "cancelada"
  fecha_inicio: timestamp,
  fecha_fin: timestamp,
  fecha_creacion: timestamp,
  fecha_actualizacion: timestamp,
  
  // Productos asociados
  productos_ids: [
    "/productos/prod123",
    "/productos/prod456"
  ],
  
  // MÃ©tricas
  metricas: {
    views: 1250,
    clicks: 320,
    conversiones: 45,
    revenue_total: 12500.50,
    revenue_comisiones: 1875.08
  },
  
  // ConfiguraciÃ³n avanzada
  codigo_promocional: "VERANO25",
  descuento_adicional: 10,
  requisitos_afiliado: {
    min_seguidores: 1000,
    categorias_permitidas: ["moda", "lifestyle"],
    ubicaciones_permitidas: ["AR", "CL", "UY"]
  },
  
  // ConfiguraciÃ³n de contenido
  hashtags_requeridos: ["#ToFitVerano", "#Moda2025"],
  hashtags_opcionales: ["#Style", "#Fashion"],
  templates_contenido: [
    {
      tipo: "story",
      url: "https://template1.jpg",
      instrucciones: "Usar en stories de Instagram"
    },
    {
      tipo: "post",
      url: "https://template2.jpg", 
      instrucciones: "Para posts de feed"
    }
  ]
}
```

### **ğŸ‘¥ ColecciÃ³n: `campaÃ±as_afiliados`**
```javascript
{
  // IdentificaciÃ³n
  id: "camp_001_user456",
  id_campaÃ±a: "camp_001",
  id_afiliado: "user456",
  
  // Estado de participaciÃ³n
  estado: "activo", // "solicitado" | "activo" | "pausado" | "rechazado" | "finalizado"
  fecha_solicitud: timestamp,
  fecha_aprobacion: timestamp,
  fecha_finalizacion: timestamp,
  
  // MÃ©tricas individuales
  metricas_afiliado: {
    contenido_creado: 8,
    views_generados: 15000,
    clicks_generados: 450,
    ventas_generadas: 12,
    revenue_generado: 2400.00,
    comision_ganada: 360.00,
    comision_pagada: 200.00,
    comision_pendiente: 160.00
  },
  
  // Contenido generado
  contenido_ids: [
    "/contenido_campaÃ±as/cont_001",
    "/contenido_campaÃ±as/cont_002"
  ],
  
  // CÃ³digo de tracking Ãºnico
  codigo_tracking: "VERANO25_USER456",
  link_afiliado: "https://tofit.com/c/VERANO25_USER456",
  
  // Notas y feedback
  notas_marca: "Excelente engagement",
  rating_afiliado: 4.8,
  comentarios_afiliado: "Muy buena campaÃ±a, productos de calidad"
}
```

### **ğŸ“ ColecciÃ³n: `contenido_campaÃ±as`**
```javascript
{
  // IdentificaciÃ³n
  id: "cont_001",
  id_campaÃ±a: "camp_001",
  id_afiliado: "user456",
  
  // InformaciÃ³n del contenido
  tipo: "instagram_post", // "instagram_story" | "tiktok" | "youtube" | "blog"
  titulo: "Look veraniego con ToFit",
  descripcion: "Outfit completo para el verano",
  
  // Enlaces y media
  url_contenido: "https://instagram.com/p/ABC123",
  imagenes: ["https://image1.jpg", "https://image2.jpg"],
  video_url: "https://video.mp4",
  
  // Estado y aprobaciÃ³n
  estado: "aprobado", // "borrador" | "pendiente" | "aprobado" | "rechazado"
  fecha_publicacion: timestamp,
  fecha_revision: timestamp,
  
  // MÃ©tricas del contenido
  metricas_contenido: {
    likes: 1250,
    comentarios: 45,
    shares: 32,
    saves: 89,
    reach: 8500,
    impressions: 12000,
    clicks_link: 156
  },
  
  // Compliance y validaciÃ³n
  hashtags_usados: ["#ToFitVerano", "#Moda2025", "#Style"],
  productos_mostrados: ["/productos/prod123"],
  cumple_requisitos: true,
  notas_revision: "Excelente contenido, muy orgÃ¡nico"
}
```

### **ğŸ“ˆ ColecciÃ³n: `metricas_campaÃ±as`**
```javascript
{
  // IdentificaciÃ³n
  id: "metricas_camp_001_2025_07",
  id_campaÃ±a: "camp_001",
  aÃ±o: 2025,
  mes: 7,
  semana: 29, // Semana del aÃ±o
  dia: "2025-07-22",
  
  // MÃ©tricas diarias/agregadas
  metricas_dia: {
    afiliados_nuevos: 3,
    contenido_nuevo: 8,
    views_totales: 25000,
    clicks_totales: 680,
    conversiones: 15,
    revenue: 3200.50,
    comisiones_generadas: 480.08
  },
  
  // Top performers
  top_afiliados: [
    {
      id_afiliado: "user456",
      revenue_generado: 1200.00,
      contenido_creado: 3
    }
  ],
  
  // Productos mÃ¡s exitosos
  productos_top: [
    {
      id_producto: "prod123",
      ventas: 8,
      revenue: 1600.00
    }
  ]
}
```

### **ğŸ¨ ColecciÃ³n: `templates_campaÃ±as`**
```javascript
{
  // IdentificaciÃ³n  
  id: "template_001",
  id_marca: "tucci123",
  
  // InformaciÃ³n del template
  nombre: "Story Template Verano",
  descripcion: "Template para stories de Instagram",
  tipo: "instagram_story", // "instagram_post" | "tiktok" | "youtube_thumbnail"
  
  // Media
  imagen_template: "https://template.jpg",
  imagen_preview: "https://preview.jpg",
  
  // ConfiguraciÃ³n
  texto_sugerido: "Â¡Nuevo look de verano con @marca! ğŸŒ",
  hashtags_sugeridos: ["#VeranoStyle", "#ToFit"],
  instrucciones: "Coloca el producto en el centro de la imagen",
  
  // Uso
  veces_usado: 45,
  rating_promedio: 4.6,
  estado: "activo" // "activo" | "inactivo"
}
```

## ğŸ”„ RELACIONES ENTRE COLECCIONES

### **ğŸ”— Esquema de Relaciones:**

```
Marcas (1) â†â†’ (N) CampaÃ±as
CampaÃ±as (1) â†â†’ (N) CampaÃ±as_Afiliados  
CampaÃ±as (1) â†â†’ (N) Contenido_CampaÃ±as
Usuarios (1) â†â†’ (N) CampaÃ±as_Afiliados
Productos (N) â†â†’ (N) CampaÃ±as (relaciÃ³n muchos a muchos)
CampaÃ±as (1) â†â†’ (N) Metricas_CampaÃ±as
```

## ğŸ¯ CASOS DE USO PRINCIPALES

### **ğŸ‘‘ Para Marcas:**
1. **Crear campaÃ±as** con productos especÃ­ficos
2. **Establecer comisiones** y requisitos
3. **Aprobar/rechazar afiliados**
4. **Revisar contenido** generado
5. **Ver mÃ©tricas** y performance
6. **Gestionar pagos** de comisiones

### **ğŸŒŸ Para Afiliados:**
1. **Explorar campaÃ±as** disponibles
2. **Solicitar participaciÃ³n** en campaÃ±as
3. **Crear contenido** siguiendo guidelines
4. **Trackear mÃ©tricas** personales
5. **Ver ganancias** y comisiones
6. **Descargar templates** y recursos

### **ğŸ“Š Para Administradores:**
1. **Moderar campaÃ±as** y contenido
2. **Resolver disputas** entre partes
3. **Generar reportes** globales
4. **Gestionar pagos** masivos
5. **Analizar tendencias** del mercado

## ğŸš€ HOOKS Y FUNCIONES PROPUESTAS

### **ğŸ“± Hooks para CampaÃ±as:**

```javascript
// Hook principal para listar campaÃ±as
export const useCampaÃ±as = (filtros?) => {
  // Cargar campaÃ±as con filtros
  // Estados: loading, error, campaÃ±as
  // Funciones: refreshCampaÃ±as, filtrarCampaÃ±as
}

// Hook para crear/editar campaÃ±a
export const useCampaÃ±aForm = (campaÃ±aId?) => {
  // Manejo del formulario completo
  // Estados: formData, loading, saving
  // Funciones: updateField, saveOrUpdate, addProducto
}

// Hook para mÃ©tricas de campaÃ±a
export const useCampaÃ±aMetricas = (campaÃ±aId) => {
  // MÃ©tricas especÃ­ficas de una campaÃ±a
  // Estados: metricas, loading, timeframe
  // Funciones: cambiarPeriodo, exportarDatos
}

// Hook para gestiÃ³n de afiliados
export const useCampaÃ±aAfiliados = (campaÃ±aId) => {
  // Lista y gestiÃ³n de afiliados
  // Estados: afiliados, solicitudes, loading
  // Funciones: aprobarAfiliado, rechazarAfiliado
}
```

## ğŸ¨ COMPONENTES SUGERIDOS

### **ğŸ§© Componentes Reutilizables:**

```javascript
// Card para mostrar campaÃ±a
<CampaÃ±aCard 
  campaÃ±a={campaÃ±a} 
  onPress={handleSelect}
  showMetrics={true}
/>

// Formulario de campaÃ±a
<CampaÃ±aForm 
  initialData={data}
  onSubmit={handleSubmit}
  loading={saving}
/>

// Selector de productos para campaÃ±a
<ProductSelector 
  productos={productos}
  selectedIds={selected}
  onSelectionChange={handleChange}
/>

// MÃ©tricas dashboard
<CampaÃ±aMetrics 
  campaÃ±aId={id}
  timeframe="month"
  showDetails={true}
/>

// Lista de afiliados
<AfiliadosList 
  campaÃ±aId={id}
  onAprobar={handleAprobar}
  onRechazar={handleRechazar}
/>
```

## ğŸ“‹ ESTADOS DE CAMPAÃ‘A SUGERIDOS

### **ğŸ”„ Flujo de Estados:**

```
BORRADOR â†’ ACTIVA â†’ PAUSADA â†’ FINALIZADA
    â†“         â†“        â†“
CANCELADA â† CANCELADA â† CANCELADA
```

### **ğŸ“Š Estados Detallados:**

- **`borrador`**: CampaÃ±a en creaciÃ³n, no visible para afiliados
- **`activa`**: CampaÃ±a publicada y disponible para participaciÃ³n  
- **`pausada`**: Temporalmente inactiva, se puede reactivar
- **`finalizada`**: Completada exitosamente, en proceso de pagos
- **`cancelada`**: Terminada antes de tiempo, requiere gestiÃ³n manual

## ğŸ¯ PRÃ“XIMOS PASOS RECOMENDADOS

### **ğŸš€ Fase 1 - MVP:**
1. **Implementar colecciones** bÃ¡sicas en Firebase
2. **Crear hooks** fundamentales (useCampaÃ±as, useCampaÃ±aForm)
3. **Actualizar pantallas** existentes con datos dinÃ¡micos
4. **Sistema bÃ¡sico** de mÃ©tricas

### **ğŸš€ Fase 2 - Funcionalidades Avanzadas:**
1. **Sistema de aprobaciÃ³n** de afiliados
2. **Templates** y recursos para afiliados
3. **Dashboard de mÃ©tricas** avanzadas
4. **Sistema de pagos** automatizado

### **ğŸš€ Fase 3 - OptimizaciÃ³n:**
1. **Notificaciones push** para eventos importantes
2. **Sistema de rating** y reviews
3. **IA para recomendaciÃ³n** de campaÃ±as
4. **ExportaciÃ³n** de reportes

## ğŸ’¡ CONSIDERACIONES ADICIONALES

### **ğŸ”’ Seguridad:**
- **ValidaciÃ³n de permisos** por rol (marca/afiliado)
- **CÃ³digos de tracking** Ãºnicos por afiliado
- **Auditoria** de cambios en campaÃ±as importantes

### **ğŸ“Š Performance:**
- **IndexaciÃ³n** en campos de bÃºsqueda frecuente
- **PaginaciÃ³n** en listados largos
- **Cache** de mÃ©tricas calculadas
- **AgregaciÃ³n** de datos histÃ³ricos

### **ğŸ¯ UX/UI:**
- **Filtros avanzados** por categorÃ­a, comisiÃ³n, ubicaciÃ³n
- **BÃºsqueda inteligente** con autocompletado
- **Notificaciones** de nuevas oportunidades
- **Dashboard personalizado** por tipo de usuario

---

**ğŸ“ NOTA:** Este documento representa una propuesta completa basada en el anÃ¡lisis del cÃ³digo existente. La implementaciÃ³n puede adaptarse segÃºn necesidades especÃ­ficas del negocio y feedback de usuarios.